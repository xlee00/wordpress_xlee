!function(a){function b(b,e){this.element=b,this.options=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="addDropCap",d={wrapper:".entry-content",minwords:50,skipSelectors:{tags:["IMG","IFRAME","H1","H2","H3","H4","H5","H6","BLOCKQUOTE"],classes:[],ids:[]},skipChildTags:["iframe"]};b.prototype.init=function(){var a=this._get_dropcap_el();a&&this.options.minwords<=this._countWords(a.text())&&this._may_be_add_dc(a)},b.prototype._get_dropcap_el=function(b){var c=b||a(this.options.wrapper).find(this.element).first(),d=this._get_real_text(c.text());return!this._is_authorized(c)&&c.next().length?this._get_dropcap_el(c.next()):this._is_authorized(c)&&d?c:c.next().length?this._get_dropcap_el(c.next()):void 0},b.prototype._get_real_text=function(a){return a.replace(/&nbsp;/g,"").replace(/ /g,""),this._removeSpecChars(a)},b.prototype._is_authorized=function(b){if("function"!=typeof _)return!0;if(b[0]&&b[0].tagName&&!(_.isArray(this.options.skipChildTags)&&b.children().first().length&&-1!=_.indexOf(_.map(this.options.skipChildTags,function(a){return a.toUpperCase()}),b.children().first()[0].tagName)||_.isArray(this.options.skipSelectors.tags)&&-1!=_.indexOf(_.map(this.options.skipSelectors.tags,function(a){return a.toUpperCase()}),b[0].tagName)||_.isArray(this.options.skipSelectors.classes)&&b.attr("class")&&0!==_.intersection(b.attr("class").split(" "),this.options.skipSelectors.classes).length||_.isArray(this.options.skipSelectors.classes)&&b.attr("id")&&-1!=a.inArray(b.attr("id").split(" "),this.options.skipSelectors.ids)))return!0},b.prototype._may_be_add_dc=function(a){var b=(a.text(),""),c=a.text().replace(/ /g,"&nbsp;").split("&nbsp;");if(_.isArray(c)&&(c.length&&(b=c[0]),b=this._removeSpecChars(b),b.charAt(0))){var d=b.charAt(0),e=b.substr(1),f="",g="";d=['<span class="tc-dropcap">',d,"</span>"].join(""),f=[d,e].join(""),g=a.html().replace(b,f),a.html(g)}},b.prototype._countWords=function(a){return"string"!=typeof a?0:(a=a.replace("&nbsp;"," "),a.split(" ").length)},b.prototype._removeSpecChars=function(a,b){return b=b||"","string"==typeof a?a.replace(/[^\w]/g,b):""},b.prototype._stripHtmlTags=function(a){return a&&"string"==typeof a?a.replace(/(<([^>]+)>)/gi,""):!1},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery,window,document);